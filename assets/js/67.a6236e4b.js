(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{54:function(t,n,a){t.exports=a.p+"assets/img/PastedGraphic_2.10e7a6e2.png"},55:function(t,n,a){t.exports=a.p+"assets/img/PastedGraphic_1.de2e5b21.png"},56:function(t,n,a){t.exports=a.p+"assets/img/PastedGraphic.b60d3942.png"},60:function(t,n,a){"use strict";a.r(n);var s=[function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"关于硬件加速"}},[t._v("关于硬件加速")]),s("h2",{attrs:{id:"各个角色在渲染过程中的作用"}},[t._v("各个角色在渲染过程中的作用")]),s("ul",[s("li",[t._v("JavaScript：JavaScript 实现动画效果，DOM 元素操作等。")]),s("li",[t._v("Style（计算样式）：确定每个 DOM 元素应该应用什么 CSS 规则。")]),s("li",[t._v("Layout（布局）：计算每个 DOM 元素在最终屏幕上显示的大小和位置。由于 web 页面的元素布局是相对的，所以其中任意一个元素的位置发生变化，都会联动的引起其他元素发生变化，这个过程叫 reflow。")]),s("li",[t._v("Paint（绘制）：在多个层上绘制 DOM 元素的的文字、颜色、图像、边框和阴影等。")]),s("li",[t._v("Composite（渲染层合并）：按照合理的顺序合并图层然后显示到屏幕上。")])]),s("blockquote",[s("p",[t._v("硬件渲染 WebKit 会依据指定条件决定将那些 RenderLayer 对象组合在一起形成一个新层并缓存在 GPU，这些新层我们统称为合成层（Compositing Layer）。\n这些合成层提升成独立的层，被独立出来之后，便不会再影响其他 dom 的布局。\n如果发生 偏移、透明度等等变换 GPU 要做的只是把更新的合成层进行相应的变换并送入 Compositor 重新合成即可，利用这个优点我们可以把页面中一些布局经常变换的 dom 提升到独立的层。\n一个页面是由多个图层最后形成一个完整的合成层才被渲染出来。")])]),s("h2",{attrs:{id:"如何触发合成层"}},[t._v("如何触发合成层")]),s("ul",[s("li",[t._v("根节点 document")]),s("li",[t._v("HTML5 Video或者Canvas元素")]),s("li",[t._v("元素有一个 z-index 较低且包含一个复合层的兄弟元素")]),s("li",[t._v("3D 或透视变换(perspective，transform) CSS 属性 比如常用的 （设置translateZ()、backface-visibility为hidden）")])]),s("blockquote",[s("p",[t._v("如果有一个元素，它的兄弟元素在复合层中渲染，而这个兄弟元素的z-index比较小，那么这个元素（不管是不是应用了硬件加速样式）也会被放到复合层中。\n使用 3D 硬件加速提升动画性能时，最好给元素增加一个 z-index 属性，人为干扰复合层的排序，可以有效减少 chrome 创建不必要的复合层，提升渲染性能，移动端优化效果尤为明显。")])]),s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("/* 关键字值 */")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" auto"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" scroll-position"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" contents"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" transform"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),s("span",{attrs:{class:"token comment"}},[t._v("/* <custom-ident>示例 */")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" opacity"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("          "),s("span",{attrs:{class:"token comment"}},[t._v("/* <custom-ident>示例 */")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" left, top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),s("span",{attrs:{class:"token comment"}},[t._v("/* 两个<animateable-feature>示例 */")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/* 全局值 */")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" inherit"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" initial"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token property"}},[t._v("will-change")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unset"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("##会继承的属性: line-height")]),s("p",[t._v("css: line-height, vertical-align")]),s("ol",[s("li",[t._v("line-height的数字值与font-size有关")]),s("li",[t._v("vertical-align的百分比值 和line-height值有关")]),s("li",[t._v("inline元素的vertical-align默认值是什么？baseline，但为什么图片与其他行内元素不在同一个水平线上？因为img默认表现与inline-block表现一样,  所以表现为元素margin底边缘; baseline指的是x的低边缘")]),s("li",[t._v("父元素的基线，中线。。。是怎么决定的？每个字体在定义的时候, 就有基线？")]),s("li",[t._v("line元素的高度是由line-height决定的,")]),s("li",[t._v("BFC, IFC")])]),s("p",[t._v("每个字体都会绘出自己的容器em-square")]),s("p",[t._v("font-size\n1em 与 字体大小相同, em-box高度即为字体大小")]),s("p",[s("img",{attrs:{src:a(56),alt:'"行高"'}}),t._v("\n￼\ncontent-area 高度是 line-height")]),s("p",[t._v("vertical-align: middle是与x-height的一半对齐")]),s("p",[t._v("font-size:0 可以让line-height变为0, 决定line-height的缝隙问题")]),s("p",[t._v("line-height: 默认normal(1或1.2) 无单位时相对于font-size")]),s("p",[s("img",{attrs:{src:a(55),alt:'"盒模型"'}}),t._v("\n￼\n每一行都有一个line-box, line-box的高度基本由其中最大的内联盒子决定, 但爱vertical-align的影响")]),s("p",[t._v("containing-box外层盒子")]),s("p",[t._v("struct 宽度为0的支柱, 但其有自己的line-height")]),s("p",[s("img",{attrs:{src:a(54),alt:'"行高"'}}),t._v("\n￼\n内联元素之间本来就是有间隙的, 但底部的间隙是由于struct的行高造成的，内联元素的基线与其基线不同造成行高会撑起一部分")]),s("p",[t._v("vertical-align接受值：提高或降低合子的基线, 值相对于line-height计算的")]),s("p",[t._v("vertical-align: baseline;\nvertical-align: sub;\nvertical-align: super;\nvertical-align: text-top;\nvertical-align: text-bottom;\nvertical-align: middle;\nvertical-align: top;\nvertical-align: bottom;")]),s("p",[t._v("/* <长度> 值 */\nvertical-align: 10em;\nvertical-align: 4px;")]),s("p",[t._v("/* <百分比> 值 */\nvertical-align: 10%;")]),s("p",[t._v("/* 全局值 */\nvertical-align: inherit;\nvertical-align: initial;\nvertical-align: unset;")])])}],e=a(0),i=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},s,!1,null,null,null);n.default=i.exports}}]);