(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{134:function(t,s,n){"use strict";n.r(s);var a=n(0),o=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"单元测试与api文档生成"}},[t._v("单元测试与API文档生成")]),n("h2",{attrs:{id:"jest配置，及测试react组件及生成react组件api"}},[t._v("jest配置，及测试React组件及生成React组件API")]),n("ul",[n("li",[t._v("package.json文件里配置jest项")])]),n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token property"}},[t._v('"jest"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token property"}},[t._v('"script"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"test"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"jest --env=node --config jest.config.js"')]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),n("ul",[n("li",[n("p",[t._v("jest.config.js配置文件")])]),n("li",[n("p",[t._v("所需的第三方模块：")]),n("ol",[n("li",[t._v("babel-jest")]),n("li",[t._v("ts-jest/prepreocessor  测试typescript")]),n("li",[t._v("jsonml.js/lib/utils  提供了一些分析jsonML的方法")]),n("li",[t._v("mark-twain  将markdown处理成JsonML; 其包含meta, content字段")]),n("li",[t._v("enzyme  提供了react的测试方法")])])]),n("li",[n("p",[t._v("明确组件需要测试的点有哪些")])]),n("li",[n("p",[t._v("在__tests__目录下创建*.spec.js 或*.test.js")])]),n("li",[n("p",[t._v("enzyme模块的shallow方法，「实现了浅渲染」，即仅仅渲染至虚拟dom，不会返回真实的dom节点；除此外还有两个渲染方法："),n("code",[t._v("mount")]),t._v("全渲染，渲染真实的dom节点，即需要测试环境对DOM API有支持，jest内部使用了jsdom去模拟DOM环境，所以可以不写setup.js文件去mock那个全局变量了 和 "),n("code",[t._v("render")]),t._v(" 可以渲染出最终的html")])]),n("li")]),n("ul",[n("li",[n("p",[t._v("vue为「jext + vue-test-utils」, 其中的mount或shallow将组件在后端渲染出来，通过setData, propsData, setMethods方法模拟用户的操作或测试条件，shallow不会将子组件渲染出来。")])]),n("li",[n("p",[t._v("toMatchSnapshot来对比快照，第一次进行快照测试，针将测试文件所在目录下建__snapshots__存放快照文件")])])]),n("h2",{attrs:{id:"api文档生成"}},[t._v("API文档生成")]),n("ol",[n("li",[n("p",[t._v('concurrently 复合命令，如concurrently paramer "A" "B"')])]),n("li",[n("p",[t._v("bisheng 用react将markdwon转成静态网站或博客，基于dora, webpack, react, react-router")]),n("ul",[n("li",[t._v("支持浏览器历史")]),n("li",[t._v("延迟加载markdown数据")]),n("li",[t._v("系统插件支持扩展默认行为")]),n("li",[t._v("服务端渲染支持SEO")]),n("li",[t._v("使用：创建bisheng.config.js配置文件，启动服务：bisheng start, 编译：build, 发布静态：gh-pages")])]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      port"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("8000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 源markdown文件")]),t._v("\n      source"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./posts'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// exclude 不包含")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 输出markdown数据树")]),t._v("\n      output"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./_site'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 主题")]),t._v("\n      theme"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./_theme'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// themeConfig 主题提供的配置，或从props.themeConfig读取")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// html模板")]),t._v("\n      htmlTemplate"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("join")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'../template.html'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// htmlTemplateExtraData 额外用于渲染html模板的数据")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// ")]),t._v("\n      transformer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      postcssConfig"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 服务配置")]),t._v("\n      devServerConfig"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 修改webapck配置或才扩展")]),t._v("\n      "),n("span",{attrs:{class:"token function"}},[t._v("webpackConfig")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 根据webpack生成文件名")]),t._v("\n      entryName"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'index'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 发布静态站根目录")]),t._v("\n      root"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// doraConfig ???")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// filePathMapper ???")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("li",[n("p",[t._v("cdn配置")])])])])}],!1,null,null,null);s.default=o.exports}}]);