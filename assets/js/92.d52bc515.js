(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{282:function(e,t,s){"use strict";s.r(t);var a=s(6),_=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"进入mysql命令行"}},[e._v("进入mysql命令行")]),e._v(" "),s("ol",[s("li",[e._v("brew services start mysql")]),e._v(" "),s("li",[e._v("mysql -u root")]),e._v(" "),s("li",[e._v("远程：mysql -h host -p port -u root -p pwd")]),e._v(" "),s("li",[e._v("mysql --skip-grant-tables 跳过权限验证")])]),e._v(" "),s("h2",{attrs:{id:"常用查询"}},[e._v("常用查询")]),e._v(" "),s("p",[e._v("show processlist 正在运行的线程\nshow variables\nselect database() 当前数据库\nselect now(), user(), version() 当前时间、用户、版本")]),e._v(" "),s("p",[e._v("怎么样保存上一句查找结果？")]),e._v(" "),s("h2",{attrs:{id:"用户变量-作用域为整个会话-或-在过程中为局部变量赋值"}},[e._v("用户变量----作用域为整个会话 或 在过程中为局部变量赋值")]),e._v(" "),s("p",[e._v("set @varName = expr, ...    不加前缀，默认为会话变量\nselect @varName:=(select) 或 set @varName=(select)")]),e._v(" "),s("p",[e._v("show session variables 显示会话变量\nshow global variables 显示全局变量")]),e._v(" "),s("p",[e._v("set session varName=value 或 set @@session.varName=value")]),e._v(" "),s("p",[e._v("select @@session/global.varName 查询值")]),e._v(" "),s("p",[e._v(": @@session 或以用 @@local代替")]),e._v(" "),s("h2",{attrs:{id:"存储过程变量-会默认初始化为null"}},[e._v("存储过程变量----会默认初始化为null")]),e._v(" "),s("p",[e._v("declare varName type default 0")]),e._v(" "),s("h2",{attrs:{id:"拾贝"}},[e._v("拾贝")]),e._v(" "),s("ol",[s("li",[e._v("do sleep(5)")])]),e._v(" "),s("h2",{attrs:{id:"select-all-distinct-select表达式-from-where-group-by-having-order-by-limit"}},[e._v("select [all | distinct] select表达式 from, where, group by, having, order by, limit")]),e._v(" "),s("h2",{attrs:{id:"select-表达式"}},[e._v("select 表达式")]),e._v(" "),s("ol",[s("li",[s("ul",[s("li")])]),e._v(" "),s("li",[e._v("计算公式、函数调用、表达式，聚合函数：count, sum, avg, max, min（在select 的返回字段中）")]),e._v(" "),s("li",[e._v("field 或用 as 使用别名")]),e._v(" "),s("li",[e._v("ifnull(exp1, exp2), if(expr, exp1, exp2), coalesce()")])]),e._v(" "),s("h2",{attrs:{id:"where-语句可用的关键表达式-与-函数-子句-字段必须是数据表存在的-不可以是别名-不可以聚合函数"}},[e._v("where 语句可用的关键表达式 与 函数(子句)，字段必须是数据表存在的，不可以是别名，不可以聚合函数")]),e._v(" "),s("ol",[s("li",[e._v("in / not in()")]),e._v(" "),s("li",[e._v('(not) like "%_"')]),e._v(" "),s("li",[e._v("is null")]),e._v(" "),s("li",[e._v("is not true / false / unknown")]),e._v(" "),s("li",[e._v("(not) between and")]),e._v(" "),s("li",[e._v("and, or, xor")]),e._v(" "),s("li",[e._v("=, <=>, <>, !=, <=, <, >=, >, !, &&, ||")]),e._v(" "),s("li",[e._v("可以用子句，子句返回聚合的数据，然后再筛选")])]),e._v(" "),s("h2",{attrs:{id:"having子句-结果再次筛选-字段必须是筛选出来的-可以是别名"}},[e._v("having子句，结果再次筛选，字段必须是筛选出来的，可以是别名")]),e._v(" "),s("h2",{attrs:{id:"与case语句一起"}},[e._v("与case语句一起")]),e._v(" "),s("p",[e._v("select case v when expr then exp1 else exp2 end;")]),e._v(" "),s("h2",{attrs:{id:"补充限定"}},[e._v("补充限定")]),e._v(" "),s("ol",[s("li",[e._v("order by field desc / asc")])]),e._v(" "),s("h2",{attrs:{id:"类型"}},[e._v("类型")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("整形\ntinyint\nsmallint\nmediumint\nint(M)\nbigint")])]),e._v(" "),s("li",[s("p",[e._v("浮点型\nfloat(M, D)\ndouble(M, D)")])]),e._v(" "),s("li",[s("p",[e._v("定点数\ndecimal(总位数，小数点位数)")])]),e._v(" "),s("li",[s("p",[e._v("字符串\nchar\nvarchar")])])]),e._v(" "),s("ul",[s("li",[s("p",[e._v("二进制\nblob\ntext")])]),e._v(" "),s("li",[s("p",[e._v("binary, varbinary")])])]),e._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[e._v("日期")])]),e._v(" "),s("ul",[s("li",[e._v("datetime  “YYYY-MM-DD hh:mm:ss”")]),e._v(" "),s("li",[e._v("date   “YYYY-MM-DD”")]),e._v(" "),s("li",[e._v("times  tamp  “YY-MM-DD hh:mm:ss”")]),e._v(" "),s("li",[e._v("time    “hh:mm:ss”")]),e._v(" "),s("li",[e._v("year   “YYYY”")])]),e._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[e._v("枚举")])]),e._v(" "),s("ul",[s("li",[e._v("enum()")]),e._v(" "),s("li",[e._v("set()")])]),e._v(" "),s("h2",{attrs:{id:"定义-create-alter-drop"}},[e._v("定义 create, alter, drop")]),e._v(" "),s("ul",[s("li",[e._v("数据库")])]),e._v(" "),s("ol",[s("li",[e._v("创建 create {database | schema} [if not exists] db_name default character set =")]),e._v(" "),s("li",[e._v("选择 use db_name")]),e._v(" "),s("li",[e._v("修改 alter {database | schema} [db_name] default charracter set gb2312 default collate ... 字符集和校对规则")]),e._v(" "),s("li",[e._v("删除 drop  {database | schema} [if exists] db_name")]),e._v(" "),s("li",[e._v("查看 show {databases | schemas} [like 'pattern' | where expr]")])]),e._v(" "),s("ul",[s("li",[e._v("表")])]),e._v(" "),s("ol",[s("li",[e._v("create [temporary] table tbl_name(\nfield type [列级完整性约束] [default value]----int double bool (long) date timestamp time char varchar NULL; float\n[表级完整性约束]:\nprimary key(field, field...)\n[unique] index idx_name(feild...)\nforeign key(field)\nreference other_tbl_name(field)\non delete restrict\non update restrict\n)[engine=]")]),e._v(" "),s("li",[e._v("修改 alter table tbl_name 【add column | change column | alter column | modify column | drop column | rename To db.tbl_name】.... change可以修改表名、类型、约束；alter修改默认值；modify 修改类型\nFirst, after field 定义列的位置\n添加索引 add [unique | primary | foreign] index|key idx_name(idx_col_name,...)\n删除索引 drop primary key\ndrop index idx_name\ndrop foreign key")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("alter")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("table")]),e._v(" forTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("S_C "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("add")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("foreign")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Cno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("references")]),e._v(" forTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("C"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Cno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("on")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("cascade")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("on")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("update")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("cascade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("alter")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("table")]),e._v(" forTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("S change "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("column")]),e._v(" Sname "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("char")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("重命名 rename table tbl_name TO new_tbl_name")]),e._v(" "),s("li",[e._v("删除 drop table ... [restrict | cascade]")]),e._v(" "),s("li",[e._v("查看表 show [full] tables [from | in] tbl_name")]),e._v(" "),s("li",[e._v("查看表结构 show [full] columns [from | in] tbl_name [like 'pattern' | where expr] 或 desc db.tbl_name")]),e._v(" "),s("li",[e._v("show table status from databases 数据库管理系统性能及统计信息")])]),e._v(" "),s("ul",[s("li",[e._v("列")])]),e._v(" "),s("ol",[s("li",[e._v("show columns from tabName")])]),e._v(" "),s("ul",[s("li",[e._v("索引 index, unique, primary key")])]),e._v(" "),s("ol",[s("li",[e._v("create [unique] index idx_name on tbl_name (idx_col_name(length) asc/desc,...) 索引在表中的名称是唯一的，索引列的描述")]),e._v(" "),s("li",[e._v("查看 show {index | indexes | keys} {from | in} tbl_name {from | in} db_name [where expr]")]),e._v(" "),s("li",[e._v("删除 drop index idx_name ON tbl_name")])]),e._v(" "),s("h2",{attrs:{id:"操纵-select-insert-update-delete"}},[e._v("操纵 select, insert, update, delete")]),e._v(" "),s("ul",[s("li",[e._v("插入")])]),e._v(" "),s("ol",[s("li",[e._v("insert into tbl_name [(col_name,...)省略为全部] {values | value} ({expr | default},...) (...);")]),e._v(" "),s("li",[e._v("insert into tbl_name SET col_name={exprr | DEFAULT}, ...")]),e._v(" "),s("li",[e._v("insert into tbl_name [(col_name,...)] SELECT 将查询数据插入到另一个表中")])]),e._v(" "),s("ul",[s("li",[e._v("删除")])]),e._v(" "),s("ol",[s("li",[e._v("delete from tbl_name [where condition] [order by ...] [limit n] 删除一行或多行数据")])]),e._v(" "),s("ul",[s("li",[e._v("更新")])]),e._v(" "),s("ol",[s("li",[e._v("update tbl_name SET col_name={expr | DEFAULT}, ... [where condition] [order by ...] [limit n]")])]),e._v(" "),s("ul",[s("li",[e._v("查询")])]),e._v(" "),s("ol",[s("li",[s("p",[e._v("select [all|distinct去除重复行] field/select_expr,... 如：*, field as new_name\nfrom tbl_references\nwhere\ngroup by\nhaving\norder by\nlimit")])]),e._v(" "),s("li",[s("p",[e._v("select_expr: 可以是聚合函数 count, max, min, sum, avg, std标准值, variance方差, group_concat 一组列值组合而成的结果, bit_and, bit_or, bit_xor 异或")])])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("select")]),e._v(" field "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" v\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("select")]),e._v(" field\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("case")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("when")]),e._v(" condition "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("then")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'value'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'value2'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("end")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("as")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" new_name\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[e._v("from 多表连接查询")])]),e._v(" "),s("ul",[s("li",[e._v("交叉----tbl cross join tbl2 或逗号分隔 结果是乘积；")]),e._v(" "),s("li",[e._v("内连接----tbl {inner join | join} tbl2 ON condition 消除交叉连接中的某些行，自连接：查找相同列值的行时用（表与自身连接）")]),e._v(" "),s("li",[e._v("外连接----基表和参考表，以基表为依据返回满足和不满足条件的记录，{left outer join | left join} 与关键字的右边表进行匹配, null表示右表没有找到与左表相符的记录；{right outer join | right join} 右表为基表 on condition")])]),e._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[e._v("where")])]),e._v(" "),s("ul",[s("li",[e._v("比较运算 <>, !=, <=>")]),e._v(" "),s("li",[e._v("范围 expr [not] between expr1 and expr2； expr IN (list)")]),e._v(" "),s("li",[e._v("空值 expr IS [NOT] NULL")]),e._v(" "),s("li",[e._v("子查询 expr [not] IN (select...)；expr 比较运算 {ALL | SOME | ANY} (select...)；exist (select...)")])]),e._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[e._v("group by 根据选择的列的值进行逻辑分组 {col_name "),s("code",[e._v("select列中的项")]),e._v("|expr"),s("code",[e._v("通常与聚合函数一起使用")]),e._v("|position"),s("code",[e._v("select 结果集中的位置")]),e._v("} [asc|desc], ... [WITH ROLLUP"),s("code",[e._v("汇总行")]),e._v("] 条件不可以是聚合函数")]),e._v(" "),s("li",[e._v("having 对分组再进行过滤，可以是聚合函数")]),e._v(" "),s("li",[e._v("order by {col_name | expr | position "),s("code",[e._v("select结果集中的位置")]),e._v("} [asc|desc], ... 升序、降序，空值最小")]),e._v(" "),s("li",[e._v("limit {[offset,] row_count | row_count OFFSET offset}")])]),e._v(" "),s("ul",[s("li",[e._v("数据安全性与一致性")])]),e._v(" "),s("ol",[s("li",[e._v("实例完整性约束-----主键，如果是一个字段，则可以定义为列或表完整性约束，如果是多个字段，必须为表完整性约束；一个表一个。")]),e._v(" "),s("li",[e._v("实例完整性约束-----候选键，唯一且不为NULL，unique 键，unique索引。")]),e._v(" "),s("li",[e._v("参照完整性约束-----列上添加references，表上添加foreign key(col_name, ..."),s("code",[e._v("被参照表中的主键或候选键")]),e._v(") references")]),e._v(" "),s("li",[e._v("restrict 拒绝对被参照表的删除和更新操作；cascade 被参照表更新，则更新参照表中匹配的记录；set NULL  被参照表更新，则更新参照表对应外键为NULL, no action 同restrict。")]),e._v(" "),s("li",[e._v("触发器----完善主键与外键不能保证的复杂的参照完整性")]),e._v(" "),s("li",[e._v("用户自定义完整性----NOT NULL 或 check(expr)")]),e._v(" "),s("li",[e._v("命名完整性约束----- constraint [symbol]")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("alter")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("table")]),e._v(" tbl_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("add")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("foreign")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("key")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("col_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("references")]),e._v(" other_tbl_name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("idx_col_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("asc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("desc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("on")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),e._v(" {"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("restrict")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("cascade")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("set")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("NULL")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("no")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("action")]),e._v("}\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("create")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("trigger")]),e._v(" t_name t_time t_event "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" tbl_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for each row")]),e._v(" t_body\nt_time"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("---before/after")]),e._v("\nt"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("event"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("---insert/update/delete")]),e._v("\nt_body"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('----多行用begin...end；单行SET @var="value"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("insert")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("----NEW.field来访问被插入的数据")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("----OLD.field访问之间的值")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("update")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("----可以访问NEW及OLD")]),e._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("drop")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("trigger")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("schema_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("t_name\n")])])]),s("ul",[s("li",[e._v("视图")])]),e._v(" "),s("ol",[s("li",[e._v("创建 create view v_name [(col_list)] AS select_statement [with [cascaed|local "),s("code",[e._v("检查所有或当前视图")]),e._v("] check option "),s("code",[e._v("修改时需要符合select")]),e._v("]")]),e._v(" "),s("li",[e._v("drop view [if exists] v_name,...[restrict | cascade]")]),e._v(" "),s("li",[e._v("alter view v_name [(col_list)] AS select_s ...")]),e._v(" "),s("li",[e._v("show create view v_name")]),e._v(" "),s("li",[e._v("insert into v_name values (...)")]),e._v(" "),s("li",[e._v("update v_name set field=''")]),e._v(" "),s("li",[e._v("delete from v_name where ...")])]),e._v(" "),s("h2",{attrs:{id:"控制-grant-revoke"}},[e._v("控制 grant, revoke")]),e._v(" "),s("ul",[s("li",[e._v("账户")])]),e._v(" "),s("ol",[s("li",[e._v("create user u_name[identified by [PASSWORD] 'password']------要有insert、全局create user权限，需要在mysql的user表中插入一条数据，新用户只有show权限。")]),e._v(" "),s("li",[e._v("select PASSWORD(456) 查询其对应的散列值")]),e._v(" "),s("li",[e._v("drop user u_name@host----要有delete、全局create user权限")]),e._v(" "),s("li",[e._v("rename user old_u_name To new_user,[...]----要有update、全局create user权限")]),e._v(" "),s("li",[e._v("修改口令----set password [FOR user@host]={PASSWORD('new_pwd') | 'pwd'"),s("code",[e._v("已加密的口令")]),e._v("}")])]),e._v(" "),s("ul",[s("li",[e._v("权限")])]),e._v(" "),s("ol",[s("li",[s("p",[e._v("查看show grants for 'u_name'")])]),e._v(" "),s("li",[s("p",[e._v("授权：grant {select|upate|delete|create user...[(col_list)],...}  ON {db_name|tbl_name} [level 列、表、库、用户权限] TO u_name [identified BY [PASSWORD] 'pwd'][with grant option "),s("code",[e._v("把自己所有权限授于其他用户")]),e._v("]")])]),e._v(" "),s("li",[s("p",[e._v("当前库所有表："),s("em",[e._v("，所有库的所有表：")]),e._v(".*，db_name.*库中所有表，db_name.tbl_name/v_name，db_name.func_name")])]),e._v(" "),s("li",[s("p",[e._v("revoke {select|upate|delete|create user...[(col_list)],...}  ON {db_name|tbl_name} from 'user@host'")])]),e._v(" "),s("li",[s("p",[e._v("刷新权限 flush privileges")])]),e._v(" "),s("li",[s("p",[e._v("所有权限：")])]),e._v(" "),s("li",[s("p",[e._v("Alter 　　修改表和索引")])]),e._v(" "),s("li",[s("p",[e._v("Create 　创建数据库和表")])]),e._v(" "),s("li",[s("p",[e._v("Delete 　删除表中已有的记录")])]),e._v(" "),s("li",[s("p",[e._v("Drop 　　 抛弃（删除）数据库和表")])]),e._v(" "),s("li",[s("p",[e._v("INDEX 　创建或抛弃索引")])]),e._v(" "),s("li",[s("p",[e._v("Insert 　 向表中插入新行")])]),e._v(" "),s("li",[s("p",[e._v("REFERENCE 　　未用")])]),e._v(" "),s("li",[s("p",[e._v("Select　　　　 检索表中的记录")])]),e._v(" "),s("li",[s("p",[e._v("Update 　　　　 修改现存表记录")])]),e._v(" "),s("li",[s("p",[e._v("FILE 　　　　　　读或写服务器上的文件")])]),e._v(" "),s("li",[s("p",[e._v("PROCESS 　　 查看服务器中执行的线程信息或杀死线程")])]),e._v(" "),s("li",[s("p",[e._v("RELOAD 　　　　重载授权表或清空日志、主机缓存或表缓存。")])]),e._v(" "),s("li",[s("p",[e._v("SHUTDOWN　　 关闭服务器")])]),e._v(" "),s("li",[s("p",[e._v("ALL 　　　　　　所有；ALL PRIVILEGES同义词")])]),e._v(" "),s("li",[s("p",[e._v("USAGE 　　　　特殊的“无权限”权限")])])]),e._v(" "),s("h2",{attrs:{id:"备份与恢复数据"}},[e._v("备份与恢复数据")]),e._v(" "),s("ul",[s("li",[e._v("select * into outfile 'file_name' export_options | into dumpfile 'file_name  紧挨着")]),e._v(" "),s("li",[e._v("load data infile 'file_name' into table tbl_name load_option")])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("fields")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("terminated")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'string'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("----字段间的符号")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("optionally")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("enclosed")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'char'")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("----optionally表示所有的值都放在双引号之间；字符值放在双引号之间")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("escaped")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'char'")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("------转义字符")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("lines")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("terminated")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'string'")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("------备份时行结束标志")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("lines")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("starting")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'string'")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("--------行前缀与后缀")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("terminated")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'string'")]),e._v("\n")])])]),s("h2",{attrs:{id:"常用操作"}},[e._v("常用操作")]),e._v(" "),s("ol",[s("li",[e._v("操作之前判断 if not exists, 如 create table if not exists user")]),e._v(" "),s("li",[e._v("更改编码类型：CHARACTER SET  指定字符集")])]),e._v(" "),s("h2",{attrs:{id:"查看当前所在"}},[e._v("查看当前所在")]),e._v(" "),s("ol",[s("li",[e._v("数据库")]),e._v(" "),s("li",[e._v("帐户")])]),e._v(" "),s("h2",{attrs:{id:"数据库"}},[e._v("数据库")]),e._v(" "),s("ol",[s("li",[e._v("启动：bash mysql.server start")]),e._v(" "),s("li",[e._v('用户登录【交互模式】：Mysql -u root -p passwd；【命令模式】：mysql -p pwd -e "查询命令或其他命令"；【批处理模式】：more xxx.sql 或 source xxx.sql 或 mysql -u xxx -p xxx < xxx.sql')]),e._v(" "),s("li",[e._v("连接远程数据库服务器：mysql  - D 所选择数据库名  -h 主机名 -u 用户名 -p 密码")]),e._v(" "),s("li",[e._v("查看：show databases")]),e._v(" "),s("li",[e._v("创建建：create database name")]),e._v(" "),s("li",[e._v("启用：use databaseName 或 \\u databaseName")]),e._v(" "),s("li",[e._v("删除：Drop database databaseName")]),e._v(" "),s("li",[e._v("备份：mysqldump -u root -p 数据库名>url/xxx.sql")]),e._v(" "),s("li",[e._v("恢复：mysql -u root 新数据库名<xxx.sql")]),e._v(" "),s("li",[e._v("执行外部sql：mysql -u root -p --source xxx.sql 或 source xxx.sql")])]),e._v(" "),s("h2",{attrs:{id:"表"}},[e._v("表")]),e._v(" "),s("ul",[s("li",[e._v("基础操作")])]),e._v(" "),s("ol",[s("li",[e._v("查看：Show tables;")]),e._v(" "),s("li",[e._v("创建：Create table Tname (fieldName type description , fieldName…)")]),e._v(" "),s("li",[e._v("插入：Insert into tableName ([fieldName, …]) values (v1,…)")]),e._v(" "),s("li",[e._v("删除：Drop table Tname 或 Delete from Tname 。。。")]),e._v(" "),s("li",[e._v("修改：Alter table tableName rename newTableName")]),e._v(" "),s("li",[e._v("通过脚本文件创建表：mysql -D databaseName -u userName -p < createtable.sql")]),e._v(" "),s("li",[e._v("创建时字段描述：类型[(长度)] 索引 自增 默认值(int unsigned primary key auto_increment unique not null default '')")])]),e._v(" "),s("h2",{attrs:{id:"修改表结构"}},[e._v("修改表结构：")]),e._v(" "),s("ol",[s("li",[e._v("add 字段 类型；删除 drop column 字段；更名或其他描述：change old字段名 new字段名 iteger；add index 索引名 (字段名, ...)")]),e._v(" "),s("li",[e._v("修改字段描述：alter table table_name modify column field type;")]),e._v(" "),s("li",[e._v("alter table note drop primary key; alter table note modify cloumn note_id auto_increment; alter table note add primary key(note_id);")]),e._v(" "),s("li",[e._v('1 SELECT auto_increment FROM information_schema.tables where table_schema="dbName" and table_name="tableName";')]),e._v(" "),s("li",[e._v("alter 中使用 modify 与 change：alter table user change old_field new field integer")]),e._v(" "),s("li",[e._v("add：alter table user add new_field 描述; add primary key(field);")])]),e._v(" "),s("ul",[s("li",[e._v("修改表结构")])]),e._v(" "),s("ol",[s("li",[e._v("添加字段：alter table tableName add fieldName  type after fieldName")]),e._v(" "),s("li",[e._v("修改字段名：alter table tableName change newFieldName NewType")]),e._v(" "),s("li",[e._v("删除字段：Alter table tableName drop fieldName")]),e._v(" "),s("li",[e._v("创建表时与另一表有相同字段：foreign key (fieldName) references 表名 (fieldName);")])]),e._v(" "),s("h2",{attrs:{id:"字段"}},[e._v("字段")]),e._v(" "),s("ol",[s("li",[e._v("查询 desc 表名")])]),e._v(" "),s("h2",{attrs:{id:"表数据"}},[e._v("表数据")]),e._v(" "),s("ol",[s("li",[e._v("插入：insert into tableName (fieldName,...) (values...)")]),e._v(" "),s("li",[e._v("更新；update tableName set fieldName = v, ... where condition")]),e._v(" "),s("li",[e._v("删除：delete from 表名 where condition")])]),e._v(" "),s("p",[e._v("常用常量：\nNULL default")]),e._v(" "),s("p",[e._v("查询：\nSelect fieldName, …   from tableName where 运算")]),e._v(" "),s("p",[e._v("更新：\nupdate tableName set  fieldName = v  where 运算")]),e._v(" "),s("p",[e._v("删除：\ndelete from tableName where 运算")]),e._v(" "),s("h2",{attrs:{id:"主键-外键-关联"}},[e._v("主键，外键，关联")]),e._v(" "),s("ol",[s("li",[e._v("主键：标识一条记录，不可重复或空；保证数据完整性。")]),e._v(" "),s("li",[e._v("外键：另一个表的主键，可以空或重复，建立与其他表的联系。主键值修改，关联的数据也同步更新；保证了一致性。")]),e._v(" "),s("li",[e._v("alter table 表名 add promary key 字段名/ constraint "),s("code",[e._v("外键名")]),e._v(" foreign key 字段名 references 另一个表 (字段) / index (字段名)")]),e._v(" "),s("li",[e._v("对外键关联操作的定义：on delete cascade on update cascade; 或 on delete no action on update no action;")]),e._v(" "),s("li",[e._v("删除外键：alter table tableName drop foreign key "),s("code",[e._v("外键名")])]),e._v(" "),s("li",[e._v("取消外键：set foreign_key_checks = 0;")])]),e._v(" "),s("h2",{attrs:{id:"数据类型"}},[e._v("数据类型")]),e._v(" "),s("ul",[s("li",[e._v("数字类型\n"),s("ol",[s("li",[e._v("整数: tinyint、smallint、mediumint、int、bigint")]),e._v(" "),s("li",[e._v("浮点数: float、double、real、decimal")])])]),e._v(" "),s("li",[e._v("日期和时间: date、time、datetime、timestamp、year")]),e._v(" "),s("li",[e._v("字符串类型\n"),s("ol",[s("li",[e._v("字符串: char、varchar")]),e._v(" "),s("li",[e._v("文本: tinytext、text、mediumtext、longtext")])])]),e._v(" "),s("li",[e._v("二进制(可用来存储图片、音乐等): tinyblob、blob、mediumblob、longblob")]),e._v(" "),s("li",[e._v("对类型的描述：unsigned, signed")]),e._v(" "),s("li",[e._v("Set, Enum类型")]),e._v(" "),s("li",[e._v("修改字段类型：set foreign_key_checks = 0; alter table user modify column user_id bigint;set foreign_key_checks = 1;")])]),e._v(" "),s("h2",{attrs:{id:"变量"}},[e._v("变量")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("用户变量(会话变量)，声明：SET @标识符 = v；")]),e._v(" "),s("ol",[s("li",[e._v("在查询中使用：select @标识符")]),e._v(" "),s("li",[e._v("在查询语句中进行赋值：select @标识符 := max(age) from student")]),e._v(" "),s("li",[e._v("selct @@标识符")])])]),e._v(" "),s("li",[s("p",[e._v("查看所有系统变量")]),e._v(" "),s("ul",[s("li",[e._v("show variables;")])])]),e._v(" "),s("li",[s("p",[e._v("修改变量： set variable_name = new_name  , global关键字为永久修改")])])]),e._v(" "),s("h2",{attrs:{id:"帐户-是多用户数据库-访问mysql-user"}},[e._v("帐户，是多用户数据库，访问mysql.user")]),e._v(" "),s("ol",[s("li",[e._v("数据库mysql")]),e._v(" "),s("li",[e._v("相关数据表：user, db, host, tables_priv, columns_priv, procs_priv...")]),e._v(" "),s("li",[e._v("user存储包含：用户信息(主机%、用户名、密码)，权限_priv，安全ssl_，资源分配max_")]),e._v(" "),s("li",[e._v("可以select, insert, alter相关的权限表：table_priv, column_priv, procs_priv")]),e._v(" "),s("li",[e._v("查询：select user from mysql.user")]),e._v(" "),s("li",[e._v("创建：create user user_name[@hostname] [identified by 'password']")]),e._v(" "),s("li",[e._v("删除：drop user 'username'@'hostname'")]),e._v(" "),s("li",[e._v("更新密码：set password for 'username' = password('password') 或 = ‘password’ 或 update user set password = password('password') where user=\"username\"")]),e._v(" "),s("li",[e._v('delete from mysql.user where user="username"')]),e._v(" "),s("li",[e._v("更新密码：update mysql.user set password=password('1111') where user = 'root';\n或 修改当前用户密码 set password=password('1111');\n或set password for '用户名'@'主机名' = password=password('1111')")])]),e._v(" "),s("ul",[s("li",[s("p",[e._v("权限")]),e._v(" "),s("ol",[s("li",[e._v("权限分为：ALL PRIVILEGES、CREATE、ALTER、INSERT、UPDATE、DELETE、SELECT")]),e._v(" "),s("li",[e._v("创建用户并设置权限：grant 权限值, (select,insert,update,delete) on 数据库名.表 to 'username'@'hostname' [identified by 'password']")]),e._v(" "),s("li",[e._v("对账户进行权限增加：grant 权限值, ... on 数据库名. to username1, username2... with grant option")]),e._v(" "),s("li",[e._v("刷新权限：flush privileges")]),e._v(" "),s("li",[e._v("回收权限：revoke privilege 权限值, ... on 数据库名.表 from 'username'@'hostname'")]),e._v(" "),s("li",[e._v("权限有：select ,update,delete,insert(表数据)、create,alert,drop(表结构)、references(外键)、create temporary tables(创建临时表)、index(操作索引)、create view,show view(视图)、create routine,alert routine,execute(存储过程)、all,all privileges(所有权限)")]),e._v(" "),s("li",[e._v("查看权限：show grants 或 show grants for username@主机名称")])])]),e._v(" "),s("li",[s("p",[e._v("如何使用：")]),e._v(" "),s("ol",[s("li",[e._v("information_schema>[table]: user_privileges")]),e._v(" "),s("li",[e._v("mysql>[table]: tables_priv / columns_priv")]),e._v(" "),s("li",[e._v("select * from mysql.columns_priv where user='' and host=''")])])])]),e._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# % 表示任意主机，.表示数据库中所有都授权")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("GRANT")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALL")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("PRIVILEGES")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("TO")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'semon'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("@'%'")]),e._v(" IDENTIFIED "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("BY")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'semon'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("GRANT")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("TO")]),e._v(" demon "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("GRANT")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("OPTION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h2",{attrs:{id:"性能"}},[e._v("性能")]),e._v(" "),s("ol",[s("li",[e._v("开启时间监测：set profiling = 1;")]),e._v(" "),s("li",[e._v("查看检测结果：show profiles;")])]),e._v(" "),s("h2",{attrs:{id:"索引-提高了查询速度-但降低更新表的速度-因更新时需要保存数据-同时保存索引文件-会占磁盘空间"}},[e._v("索引：提高了查询速度，但降低更新表的速度，因更新时需要保存数据，同时保存索引文件，会占磁盘空间")]),e._v(" "),s("ol",[s("li",[e._v("创建：create index 索引名称 on 表名(字段名(长度))")]),e._v(" "),s("li",[e._v("查看：show index from 表名")]),e._v(" "),s("li",[e._v("删除：drop index 索引名 on 表名")]),e._v(" "),s("li",[e._v("普通、唯一、全文索引；主键、外键")])]),e._v(" "),s("h2",{attrs:{id:"关联-外键关系"}},[e._v("关联(外键关系)")]),e._v(" "),s("ol",[s("li",[e._v("foreign key(user_id) references user(user_id)")])]),e._v(" "),s("h2",{attrs:{id:"函数-存储过程"}},[e._v("函数/存储过程")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("创建函数，创建后会存到表中")]),e._v(" "),s("ol",[s("li",[e._v("create function "),s("code",[e._v("function_name")]),e._v("(param type, ...) returns return_type  下面是 begin 函数体语句; return v; end")]),e._v(" "),s("li",[e._v("临时变量声明：delare 变量名 变量类型 [default v]")]),e._v(" "),s("li",[e._v("临时变量赋值：set 变量名 = 表达式, ...")]),e._v(" "),s("li",[e._v("delimiter 标识符")]),e._v(" "),s("li",[e._v("使用：select field from databaseName where name = 'function_name';  select function_name();")]),e._v(" "),s("li",[e._v("删除函数：delete from database where name='function_name'")]),e._v(" "),s("li",[e._v("循环：while 条件 do 循环体; end while;")]),e._v(" "),s("li",[e._v("条件：if 条件 then 语句; end if; (判断相等是 = )")]),e._v(" "),s("li",[e._v("调用：select fun(params)")]),e._v(" "),s("li",[e._v("drop function if exists fun 可加条件的删除")]),e._v(" "),s("li",[e._v("已提供的通用方法：")])])]),e._v(" "),s("li",[s("p",[e._v("delimiter 在命令行中，默认;回车即为结束，这时需要把结束符定义成其他符号，如$$ 或 //; 例子：1) delimiter // 2) 函数或过程体    3)  end; //")])]),e._v(" "),s("li",[s("p",[e._v("存储过程：是存储在数据库中的一组SQL语句，可以在查询过程中调用这个"),s("code",[e._v("过程名字")]),e._v("来执行相关SQL")]),e._v(" "),s("ol",[s("li",[e._v("delimiter // create procedure procedure_name(params) 下面是 begin 过程体语句; end // delimiter;")]),e._v(" "),s("li",[e._v("参数类型：in 传入类型的参数， out 传出类型的参数(相当于return)，inout 既能传入又能传出")]),e._v(" "),s("li",[e._v("调用：call procedure_name; 或 call procedure_name(params);")]),e._v(" "),s("li",[e._v("删除：drop procedure procedureName")])])])]),e._v(" "),s("h2",{attrs:{id:"视图-对select语句进行封装-即存储在数据库中的一个虚拟表-复杂的查询-多处使用-想更改很麻烦"}},[e._v("视图：对select语句进行封装，即存储在数据库中的一个虚拟表；(复杂的查询，多处使用，想更改很麻烦)")]),e._v(" "),s("ol",[s("li",[e._v("创建：create view view_name as select XX as 'XX', ... from tableName as 's'")]),e._v(" "),s("li",[e._v("查看：show tables")]),e._v(" "),s("li",[e._v("调用：select field from view_name;")]),e._v(" "),s("li",[e._v("删除：drop view view_name")])]),e._v(" "),s("h2",{attrs:{id:"事务-解决操作集合-如转帐-包含扣钱方-和-收钱方-整个操作是一体的-一个单元失败则会回滚"}},[e._v("事务：解决操作集合，如转帐，包含扣钱方 和 收钱方，整个操作是一体的，一个单元失败则会回滚")]),e._v(" "),s("ul",[s("li",[e._v("原子性：全部操作，要做全做，要不做全不做")]),e._v(" "),s("li",[e._v("一致性：结果一致")]),e._v(" "),s("li",[e._v("隔离性：一个事务不爱另一个事务的影响")]),e._v(" "),s("li",[e._v("持久性：对已提交的事务，系统必须保证该事务对数据库的改变不被丢失")]),e._v(" "),s("li",[e._v("事务提交：整个事务下的操作集全部有效")]),e._v(" "),s("li",[e._v("事务回滚：整个事务下的操作集全部作废")]),e._v(" "),s("li",[e._v("脏读：一个事务将数据改变，但还未提交；此时另一个事务读取时读到的是新数据，而事务又将其回滚，此时事务再读取，发现数据又变回去了；而此前读到的变成的脏数据。(解决问题的方式：读已提交，可重复读)")]),e._v(" "),s("li",[e._v("不可复读：事务多次查询数据，因另一事务对数据的操作，导致查询数据结果不一致。(解决问题的方式：可重复读)")]),e._v(" "),s("li",[e._v("虚/幻读：事务读取值后对其更名，而另一事务又创建了此名称，而原事务再查询时发现未修改，产生了幻觉。(读未提交，读已提交)")]),e._v(" "),s("li",[e._v("读已提交：一个事务在写时，禁止其他事务读写，提交后才能被读取。")]),e._v(" "),s("li",[e._v("可重复读：一个事务在写时，禁止其他事务读写，一个事务在读取时，禁止其他事务写。")]),e._v(" "),s("li",[e._v("串行化：每次只能执行一个事务。")]),e._v(" "),s("li",[e._v("mySQL：采用innodb为其默认引擎。insert, update, delete会触发事务；开启事务后，变更会维护到本地缓存中，而非物理表中。")]),e._v(" "),s("li",[e._v("使用：begin; 提交事务 comit; 回滚事务 rollback;")]),e._v(" "),s("li",[e._v("关闭默认事务提交：set [global] autocommit = 0;")])]),e._v(" "),s("h2",{attrs:{id:"其他命令"}},[e._v("其他命令")]),e._v(" "),s("ol",[s("li",[e._v("status, help  === ? 也可以 help select")]),e._v(" "),s("li",[e._v("退出当前数据库：\\q")]),e._v(" "),s("li",[e._v("用户select user()\\g 或 select User, Host, Password from user")]),e._v(" "),s("li",[e._v("取消执行的命令：select \\c")]),e._v(" "),s("li",[e._v("select current_time();")]),e._v(" "),s("li",[e._v("select 算术运算")]),e._v(" "),s("li",[e._v("delimiter $$  ... end $$ delimiter ;  先定义结束符，再恢复。")])]),e._v(" "),s("h2",{attrs:{id:"api"}},[e._v("API")]),e._v(" "),s("ul",[s("li",[e._v("字符串")])]),e._v(" "),s("ol",[s("li",[e._v("select concat('a','-','b') 字符串连接")]),e._v(" "),s("li",[e._v("concat_ws('||','a','-','b') 以||字符间隔连接")]),e._v(" "),s("li",[e._v("lower() / lcase(), upper()")]),e._v(" "),s("li",[e._v("left(), right() 获取左 或 右侧字符串")]),e._v(" "),s("li",[e._v("ltrim(), rtrim() 删除前导 或 后续空格")]),e._v(" "),s("li",[e._v("replace(str, '?', '-') 将?替换成-")]),e._v(" "),s("li",[e._v("substring(str, offset, length)")]),e._v(" "),s("li",[e._v("trim() 删除前后两边的空格，也可以删除指定前导 和 后续的字符串\ntrim(leading'?', '??abc????') 删除前导?号\ntrim(trailing'?', '??abc????') 删除后续?号\ntrim(both'?', '??abc????') 删除两边?号")]),e._v(" "),s("li",[e._v("[not] like (% 代表0 或 多个任意字符，_任意一个字符)")]),e._v(" "),s("li",[e._v("escape")]),e._v(" "),s("li",[e._v("length()")]),e._v(" "),s("li",[e._v("instr(str, substr) 子串第一个出现的位置")])]),e._v(" "),s("ul",[s("li",[e._v("数字")])]),e._v(" "),s("ol",[s("li",[e._v("format(124567.7, 2) 保留两位小数，第三位一个逗号")]),e._v(" "),s("li",[e._v("ceil() 入，取整")]),e._v(" "),s("li",[e._v("floor() 舍，取整")]),e._v(" "),s("li",[e._v("div 整数除法，如：3 div 4 = 0；/是有小数的")]),e._v(" "),s("li",[e._v("mod 取余 与 % 一样")]),e._v(" "),s("li",[e._v("power(3, 4) 幂")]),e._v(" "),s("li",[e._v("round(3.1415, 4) 取余，四舍五入；总长度为4")]),e._v(" "),s("li",[e._v("truncate(3.1415, 2) 截断，不四舍五入；保留2位小数")]),e._v(" "),s("li",[e._v("rand()")]),e._v(" "),s("li",[e._v("least(v1, v2, ...); greatest(v1, v2, ...)")]),e._v(" "),s("li",[e._v("abs()")])]),e._v(" "),s("ul",[s("li",[e._v("日期时间")])]),e._v(" "),s("ol",[s("li",[e._v("now() 当前日期和时间")]),e._v(" "),s("li",[e._v("curdate() 当前日期")]),e._v(" "),s("li",[e._v("curtime() 当前时间")]),e._v(" "),s("li",[e._v("date_add('2016-6-6', interval 1 year) 日期和一段时间的和 或 week, month")]),e._v(" "),s("li",[e._v("datediff('2016-6-6','2015-6-6') 日期的差")]),e._v(" "),s("li",[e._v("date_format('2016-6-6', '%m/%d/%Y') 日期格式化")]),e._v(" "),s("li",[e._v("sysdate() 与 current_timestamp() 与 now()一样")]),e._v(" "),s("li",[e._v("dayname(date) 获取星期几")]),e._v(" "),s("li",[e._v("str_to_date('2017年1月10号 11时02分02秒', '%Y年%m月%d号 %h时%i分%s秒') %H为24小时制")])]),e._v(" "),s("ul",[s("li",[e._v("比较")])]),e._v(" "),s("ol",[s("li",[e._v("field is [not] null")]),e._v(" "),s("li",[e._v("value [not] / in(1,2,3,5,6)")]),e._v(" "),s("li",[e._v("value [not]between A and B;")]),e._v(" "),s("li",[e._v("= 与 <=> 判断等于null时结果不同")]),e._v(" "),s("li",[e._v("isnull(field)")])]),e._v(" "),s("ul",[s("li",[e._v("数据库信息函数")])]),e._v(" "),s("ol",[s("li",[e._v("select connection_id()")]),e._v(" "),s("li",[e._v("select database()")]),e._v(" "),s("li",[e._v("select last_insert_id()")]),e._v(" "),s("li",[e._v("version()")]),e._v(" "),s("li",[e._v("user()")])]),e._v(" "),s("ul",[s("li",[e._v("聚合函数")])]),e._v(" "),s("ol",[s("li",[e._v("round(avg(field), 3) as avg_field")]),e._v(" "),s("li",[e._v("count(field) as counts")]),e._v(" "),s("li",[e._v("max(field) as max_field; min")]),e._v(" "),s("li",[e._v("sum(field) as sum_field")])]),e._v(" "),s("ul",[s("li",[e._v("语句")])]),e._v(" "),s("ol",[s("li",[e._v("(case field when v then expr when v2 then expr2 else expr3 end) as field1")]),e._v(" "),s("li",[e._v("if(expr, expr2, expr3) if函数")])]),e._v(" "),s("ul",[s("li",[e._v("加密函数")])]),e._v(" "),s("ol",[s("li",[e._v("md5('')")]),e._v(" "),s("li",[e._v("password('')")])]),e._v(" "),s("ul",[s("li",[e._v("并发控制(多个连接对记录进行修改时，保证数据的一致性与完整性，且锁系统来控制)")])]),e._v(" "),s("ol",[s("li",[e._v("共享锁(读锁)：同一时间内，多用户可以读取同一个资源，读取过程中不会发生任何变化。")]),e._v(" "),s("li",[e._v("排他锁(写锁)：任何时间只能有一个用户写入资源，进行写锁时会阻塞其他读或写锁操作。")]),e._v(" "),s("li",[e._v("锁的力度娘----表锁(开销最小)，行锁(开销最大，并行性最大)，开销与使用锁的个数有关。")]),e._v(" "),s("li",[e._v("存储引擎：default-storage-engine = innoDB 或 create table table_name() engine = innoDB; 或 alter table tbl_name engine = innoDB;")])]),e._v(" "),s("h2",{attrs:{id:"题"}},[e._v("题")]),e._v(" "),s("ul",[s("li",[e._v('编写一个 SQL 查询，获取 Employee 表中第二高的薪水（Salary），返回字段名为SecondHighestSalary，为空时返回null (176) {"headers": {"Employee": ["Id", "Salary"]}, "rows": {"Employee": [[1, 100]]}}\n'),s("ul",[s("li",[e._v("select (select distinct (Salary) from Employee order by Salary Desc limit 1,1) as SecondHighestSalary")])])]),e._v(" "),s("li",[e._v("某网站包含两个表，Customers 表和 Orders 表。编写一个 SQL 查询，找出所有从不订购任何东西的客户。(183);\n"),s("ul",[s("li",[e._v("select Name as Customers from Customers  where Id not in (select CustomerId  from Orders)")]),e._v(" "),s("li",[e._v("select Name from Customers c left join Orders o on c.Id = o.CustomerId where o.Id is NULL")])])])])])}),[],!1,null,null,null);t.default=_.exports}}]);