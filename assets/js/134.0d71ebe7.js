(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{323:function(v,_,i){"use strict";i.r(_);var l=i(6),e=Object(l.a)({},(function(){var v=this,_=v.$createElement,i=v._self._c||_;return i("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[i("h2",{attrs:{id:"部署-node-服务"}},[v._v("部署 node 服务")]),v._v(" "),i("ol",[i("li",[v._v("代码上传到git")]),v._v(" "),i("li",[v._v("服务端git clone 检出")]),v._v(" "),i("li",[v._v("npm install")]),v._v(" "),i("li",[v._v("npm install pm2 -g")]),v._v(" "),i("li",[v._v("pm2 start index.js")]),v._v(" "),i("li",[v._v("pm2 以多核方式来部署，可以指定 CPU 的核数的实例\n"),i("ol",[i("li",[v._v("fork")]),v._v(" "),i("li",[v._v("cluster 自带负载均衡")])])])]),v._v(" "),i("h2",{attrs:{id:"如何监控-node-服务"}},[v._v("如何监控 node 服务")]),v._v(" "),i("ul",[i("li",[v._v("heapdump/ cpu profile  分析内存与函数耗时、快照")]),v._v(" "),i("li",[v._v("生产环境：alinode")]),v._v(" "),i("li",[v._v("事件延迟（BFF）")]),v._v(" "),i("li",[v._v("CPU/Memory\n"),i("ul",[i("li",[v._v("查看 pidstate 进程号，监控")]),v._v(" "),i("li",[v._v("iostate")]),v._v(" "),i("li",[v._v("接口白名单")]),v._v(" "),i("li",[v._v("cgroup/CPU/Memory 限制使用量")]),v._v(" "),i("li",[v._v("报警----middleware来做，超出负载几次?(alert-mananger)")])])]),v._v(" "),i("li",[v._v("node 日志\n"),i("ul",[i("li",[v._v("log4js---\x3eAPI/HTTP/DB/Redis 存到磁盘，产线存到阿里云(sls)")]),v._v(" "),i("li",[v._v("winston---\x3eAPI/Access/DB/Redis ---\x3ejson---\x3e上传到ES")]),v._v(" "),i("li",[v._v("SOL/time--\x3eES--\x3e(requestId/traceId)  微服务")])])]),v._v(" "),i("li",[v._v("redis\n"),i("ul",[i("li",[v._v("缓存")]),v._v(" "),i("li",[v._v("热点数据/BFF")]),v._v(" "),i("li",[v._v("缓存突然过期，分布式锁，保证？")]),v._v(" "),i("li",[v._v("服务端限流(429)\n"),i("ul",[i("li",[v._v("令牌桶，记录次数，超过一定次数，就拒绝")]),v._v(" "),i("li",[v._v("漏筒")])])])])])]),v._v(" "),i("h2",{attrs:{id:"静态代码部署"}},[v._v("静态代码部署")]),v._v(" "),i("h2",{attrs:{id:"wayne"}},[v._v("wayne")]),v._v(" "),i("h2",{attrs:{id:"k8s-做服务编排-容器集群管理系统-实现容器集群的自动化部署、自动扩缩容、维护等功能"}},[v._v("k8s 做服务编排，容器集群管理系统，实现容器集群的自动化部署、自动扩缩容、维护等功能")]),v._v(" "),i("p",[v._v("监听信号---heapdump")]),v._v(" "),i("p",[v._v("CICD---删镜像、拉镜像、起服务")]),v._v(" "),i("p",[v._v("explain 分析数据查找，慢查询日志")]),v._v(" "),i("h2",{attrs:{id:"docker"}},[v._v("docker")]),v._v(" "),i("ul",[i("li",[v._v("基础镜像")])]),v._v(" "),i("h2",{attrs:{id:"制作镜像"}},[v._v("制作镜像")]),v._v(" "),i("ul",[i("li",[v._v("创建项目文件夹并进入目录")]),v._v(" "),i("li",[v._v("git clone")]),v._v(" "),i("li",[v._v("npm init")]),v._v(" "),i("li",[v._v("npm i 安装依赖")]),v._v(" "),i("li",[v._v("创建Dockerfile文件")]),v._v(" "),i("li",[v._v("docker build -t 构建镜像")]),v._v(" "),i("li",[v._v("docker run 测试")]),v._v(" "),i("li",[v._v("docker login 登录")]),v._v(" "),i("li",[v._v("docker push 推送")])]),v._v(" "),i("h2",{attrs:{id:"dockerfile-内容"}},[v._v("Dockerfile 内容")])])}),[],!1,null,null,null);_.default=e.exports}}]);