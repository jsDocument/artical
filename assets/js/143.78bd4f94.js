(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{317:function(_,v,e){"use strict";e.r(v);var i=e(0),t=Object(i.a)({},(function(){var _=this.$createElement;this._self._c;return this._m(0)}),[function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("div",{staticClass:"content"},[e("h2",{attrs:{id:"部署-node-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署-node-服务"}},[_._v("#")]),_._v(" 部署 node 服务")]),_._v(" "),e("ol",[e("li",[_._v("代码上传到git")]),_._v(" "),e("li",[_._v("服务端git clone 检出")]),_._v(" "),e("li",[_._v("npm install")]),_._v(" "),e("li",[_._v("npm install pm2 -g")]),_._v(" "),e("li",[_._v("pm2 start index.js")]),_._v(" "),e("li",[_._v("pm2 以多核方式来部署，可以指定 CPU 的核数的实例\n"),e("ol",[e("li",[_._v("fork")]),_._v(" "),e("li",[_._v("cluster 自带负载均衡")])])])]),_._v(" "),e("h2",{attrs:{id:"如何监控-node-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何监控-node-服务"}},[_._v("#")]),_._v(" 如何监控 node 服务")]),_._v(" "),e("ul",[e("li",[_._v("heapdump/ cpu profile  分析内存与函数耗时、快照")]),_._v(" "),e("li",[_._v("生产环境：alinode")]),_._v(" "),e("li",[_._v("事件延迟（BFF）")]),_._v(" "),e("li",[_._v("CPU/Memory\n"),e("ul",[e("li",[_._v("查看 pidstate 进程号，监控")]),_._v(" "),e("li",[_._v("iostate")]),_._v(" "),e("li",[_._v("接口白名单")]),_._v(" "),e("li",[_._v("cgroup/CPU/Memory 限制使用量")]),_._v(" "),e("li",[_._v("报警----middleware来做，超出负载几次?(alert-mananger)")])])]),_._v(" "),e("li",[_._v("node 日志\n"),e("ul",[e("li",[_._v("log4js---\x3eAPI/HTTP/DB/Redis 存到磁盘，产线存到阿里云(sls)")]),_._v(" "),e("li",[_._v("winston---\x3eAPI/Access/DB/Redis ---\x3ejson---\x3e上传到ES")]),_._v(" "),e("li",[_._v("SOL/time--\x3eES--\x3e(requestId/traceId)  微服务")])])]),_._v(" "),e("li",[_._v("redis\n"),e("ul",[e("li",[_._v("缓存")]),_._v(" "),e("li",[_._v("热点数据/BFF")]),_._v(" "),e("li",[_._v("缓存突然过期，分布式锁，保证？")]),_._v(" "),e("li",[_._v("服务端限流(429)\n"),e("ul",[e("li",[_._v("令牌桶，记录次数，超过一定次数，就拒绝")]),_._v(" "),e("li",[_._v("漏筒")])])])])])]),_._v(" "),e("h2",{attrs:{id:"静态代码部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态代码部署"}},[_._v("#")]),_._v(" 静态代码部署")]),_._v(" "),e("h2",{attrs:{id:"wayne"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wayne"}},[_._v("#")]),_._v(" wayne")]),_._v(" "),e("h2",{attrs:{id:"k8s-做服务编排，容器集群管理系统，实现容器集群的自动化部署、自动扩缩容、维护等功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k8s-做服务编排，容器集群管理系统，实现容器集群的自动化部署、自动扩缩容、维护等功能"}},[_._v("#")]),_._v(" k8s 做服务编排，容器集群管理系统，实现容器集群的自动化部署、自动扩缩容、维护等功能")]),_._v(" "),e("p",[_._v("监听信号---heapdump")]),_._v(" "),e("p",[_._v("CICD---删镜像、拉镜像、起服务")]),_._v(" "),e("p",[_._v("explain 分析数据查找，慢查询日志")]),_._v(" "),e("h2",{attrs:{id:"docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[_._v("#")]),_._v(" docker")]),_._v(" "),e("ul",[e("li",[_._v("基础镜像")])]),_._v(" "),e("h2",{attrs:{id:"制作镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#制作镜像"}},[_._v("#")]),_._v(" 制作镜像")]),_._v(" "),e("ul",[e("li",[_._v("创建项目文件夹并进入目录")]),_._v(" "),e("li",[_._v("git clone")]),_._v(" "),e("li",[_._v("npm init")]),_._v(" "),e("li",[_._v("npm i 安装依赖")]),_._v(" "),e("li",[_._v("创建Dockerfile文件")]),_._v(" "),e("li",[_._v("docker build -t 构建镜像")]),_._v(" "),e("li",[_._v("docker run 测试")]),_._v(" "),e("li",[_._v("docker login 登录")]),_._v(" "),e("li",[_._v("docker push 推送")])]),_._v(" "),e("h2",{attrs:{id:"dockerfile-内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-内容"}},[_._v("#")]),_._v(" Dockerfile 内容")])])}],!1,null,null,null);v.default=t.exports}}]);