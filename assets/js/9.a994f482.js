(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{84:function(e,t,i){"use strict";i.r(t);var l=i(0),r=Object(l.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},[i("h1",{attrs:{id:"工厂"}},[e._v("工厂")]),i("h3",{attrs:{id:"fragmentfactory-vm-el-根据vm与el编译-得到linker"}},[e._v("FragmentFactory(vm, el) 根据vm与el编译, 得到linker")]),i("ul",[i("li",[i("p",[e._v("更新this.vm = vm")])]),i("li",[i("p",[e._v("el为字符串, 或 tempalte标签, template = parseTemplate(el, true)")])]),i("li",[i("p",[e._v("否则template为创建文档片断, 将el追加到template")])]),i("li",[i("p",[e._v("this.template = template")])]),i("li",[i("p",[e._v("linker = compile(template, vm.$options, true)")])]),i("li",[i("p",[e._v("this.linker = linker")])]),i("li",[i("p",[e._v("create(host, scope, parentFrag) 创建fragment实例")]),i("ol",[i("li",[e._v("frag为this.template的副本")]),i("li",[e._v("返回 new Fragment(this.linker, this.vm, frag, host, scope, parentFrag)")])])])]),i("h3",{attrs:{id:"fragment-linker-vm-frag-host-scope-parentfrag-调用linker-进行数据监听"}},[e._v("Fragment(linker, vm, frag, host, scope, parentFrag)  调用linker, 进行数据监听")]),i("ul",[i("li",[i("p",[e._v("this.inserted frag是否在文档中")])]),i("li",[i("p",[e._v("更新this到parentFrag.childFrags队列")])]),i("li",[i("p",[e._v("frag.childNodes长度为1 且其第一个子节点为__vue_anchor, 更新 "),i("strong",[e._v("this.node = frag.childNodes[0], this.before = singleBefore, this.remove = singleRemove")])])]),i("li",[i("p",[e._v("否则 this.node = 创建的fragment-start的注释节点, this.end = 创建的fragment-end的注释节点; "),i("strong",[e._v("this.frag = frag")]),e._v("; this.node添加到frag第一个子元素, this.end追加到frag, this.before = mutiBefore, this.remove = mutiRemove")])]),i("li",[i("p",[e._v("this.node._"),i("em",[e._v("vfrag")]),e._v("_ 指向当前实例this")])]),i("li",[i("p",[e._v("callHook 为循环this.childFrag, 执行其钩子函数, 循环其this.children执行其钩子")])]),i("li",[i("p",[e._v("singleBefore(target, withTransition)")]),i("ol",[i("li",[e._v("this.inserted = true")]),i("li",[e._v("(以动画方式)添加target到this.node前")]),i("li",[e._v("如果this.node已经在文档中, 则执行attach钩子, !child._isAttached时, 执行child的attached钩子")])])]),i("li",[i("p",[e._v("singleRemove")]),i("ol",[i("li",[e._v("this.inserted = false")]),i("li",[e._v("判断this.node在文档中 shouldCallRemove,")]),i("li",[e._v("执行this.beforeRemove()")]),i("li",[e._v("移除DOM之后的回调执行: 如果shouldCallRemove 则触发detach钩子, 执行self.destory()")])])]),i("li",[i("p",[e._v("beforeRemove")]),i("ol",[i("li",[e._v("循环this.childFrag进行beforeRemove(false)")]),i("li",[e._v("循环this.children进行$destory(false, true)")]),i("li",[e._v("循环this.unlink.dirs 进行监听订阅取消")])])]),i("li",[i("p",[e._v("destory")]),i("ol",[i("li",[e._v("移除this.parentFrag.childFrags当中的当前实例")]),i("li",[e._v("this.node__vfrag__ = null")]),i("li",[e._v("this.unlink()")])])]),i("li",[i("p",[e._v("multiBefore DOM操作处理一个范围, 其他与singleBefore相同")])]),i("li",[i("p",[e._v("multiRemove DOM操作处理一个范围, 其他与singleRemove相同")])])])])}],!1,null,null,null);t.default=r.exports}}]);