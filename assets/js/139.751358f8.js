(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{133:function(t,n,a){"use strict";a.r(n);var s=a(0),o=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"简说vue的执行过程"}},[t._v("简说Vue的执行过程")]),a("h3",{attrs:{id:"编译中node节点的处理"}},[t._v("编译中Node节点的处理")]),a("p",[t._v("VNODE所包含的信息：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ntag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  data"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VNodeData "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  children"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("Array"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("VNode"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  elm"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Node "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ns"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  context"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Component "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// rendered in this component's scope")]),t._v("\n  key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" number "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  componentOptions"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VNodeComponentOptions "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  componentInstance"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Component "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// component instance")]),t._v("\n  parent"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VNode "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// component placeholder node")]),t._v("\n\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// strictly internal")]),t._v("\n  raw"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// contains raw HTML? (server only)")]),t._v("\n  isStatic"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// hoisted static node")]),t._v("\n  isRootInsert"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// necessary for enter transition check")]),t._v("\n  isComment"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// empty comment placeholder?")]),t._v("\n  isCloned"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// is a cloned node?")]),t._v("\n  isOnce"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// is a v-once node?")]),t._v("\n  asyncFactory"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Function "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// async component factory function")]),t._v("\n  asyncMeta"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  isAsyncPlaceholder"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ssrContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  fnContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Component "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// real context vm for functional nodes")]),t._v("\n  fnOptions"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("ComponentOptions"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// for SSR caching")]),t._v("\n  fnScopeId"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("string"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// functional scope id support")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("实现了创建空节点，文件节点，节点复本的方法")]),a("p",[t._v("patch.js")]),a("ol",[a("li",[a("p",[t._v("sameNove(a, b) 包含key, tag, isComent, data已定义, sameInputType(a, b) 或 a.isAsyncPlaceholder为true, a.asyncFactory === b.asyncFactory, b.asyncFactory.error未定义")])]),a("li",[a("p",[t._v("sameInputType(a, b) a与b的data, attrs已定义且里面包含type；")])])]),a("h2",{attrs:{id:"lifecyclemixin-定义了-update方法实现"}},[t._v("lifecycleMixin 定义了_update方法实现")]),a("ol",[a("li",[a("p",[t._v("prevVnode "),a("strong",[t._v("patch")]),t._v("()更新vm.$el")])]),a("li",[a("p",[t._v("$forceUpdate是调用wm._watcher.update()")])]),a("li",[a("p",[t._v("$destory：钩子beforeDestroy、移除节点、销毁vm."),a("em",[t._v("watcher、vm."),a("em",[t._v("data__ob")])]),t._v(".vmCount更新、vm."),a("strong",[t._v("patch")]),t._v("(vm._vnode, null)、钩子destoryed、vm.$off()、vm.$el."),a("strong",[t._v("vue")]),t._v(" = null、vm.$vnode.parent = null")])]),a("li",[a("p",[t._v("mountComponent：钩子beforeMounted、updateComponent方法：vm._update(vm._render, hydrating) 或vm._update(vnode, hydrating)、new Watcher(vm, updateComponent, noop, {before(){钩子beforeUpdate}}, true)")])]),a("li",[a("p",[t._v("vm._vnode")])]),a("li",[a("p",[a("strong",[t._v("patch")]),t._v(" 与 _update 及 _render 分别实现的功能")])]),a("li",[a("p",[t._v("vm._inactive, vm._directInactive的作用")])])]),a("p",[t._v("指令定义包含：(create, update, destory)\nRef指令：根据vnode.data.ref获取key；vnode.context指向vm，获取其$refs；进行移除 或 更新vm.$refs[key]中的值")]),a("p",[t._v("全局变量：activeInstance = vm 或 null，_update时会更新为vm")]),a("ul",[a("li",[t._v("init: vnodecomponentInstance，A: prepatch(vnode, vnode) B: child = vnode.componentInstance = createComponentInstanceForVnode( vnode, activeInstance), child.$mount(hydrating ? vnode.elm : undefined, hydrating)")])]),a("h3",{attrs:{id:"编译过程"}},[t._v("编译过程")]),a("ol",[a("li",[t._v("Vue更新是为了生成render函数，然后生成虚拟dom，映射到页面上。")])]),a("h3",{attrs:{id:"数据处理"}},[t._v("数据处理")]),a("ol",[a("li",[t._v("Observer 为每个属性添加getter与setter；getter中把watcher添加到dep， 作数据收集；Setter中触发watcher的更新")]),a("li",[t._v("watcher更新：fn为获取数据渲染模板，执行一遍历update为了在渲染过程中调用对象的getter建立两者之间的关系")]),a("li",[t._v("Dep存一个Watcher数组subs；setter时会触发watcher的更新；")])])])}],!1,null,null,null);n.default=o.exports}}]);