(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{480:function(t,e,a){"use strict";a.r(e);var s=a(54),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http-常见的状态码有哪些"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-常见的状态码有哪些"}},[t._v("#")]),t._v(" http 常见的状态码有哪些")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Issue")]),t._v(" "),a("p",[t._v("欢迎在 Gtihub Issue 中回答此问题: "),a("a",{attrs:{href:"https://github.com/shfshanyue/Daily-Question/issues/36",target:"_blank",rel:"noopener noreferrer"}},[t._v("Issue 36"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Author")]),t._v(" "),a("p",[t._v("回答者: "),a("a",{attrs:{href:"https://github.com/jiayankai",target:"_blank",rel:"noopener noreferrer"}},[t._v("jiayankai"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[t._v("1XX 表示消息")]),t._v(" "),a("li",[t._v("2XX 表示成功")]),t._v(" "),a("li",[t._v("3XX 表示重定向")]),t._v(" "),a("li",[t._v("4XX 表示客户端错误")]),t._v(" "),a("li",[t._v("5XX 表示服务端错误")])]),t._v(" "),a("h4",{attrs:{id:"常见的状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见的状态码"}},[t._v("#")]),t._v(" 常见的状态码")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("200")]),t._v(" "),a("blockquote",[a("p",[t._v("最喜欢见到的状态码，表示请求成功")])])]),t._v(" "),a("li",[a("p",[t._v("301")]),t._v(" "),a("blockquote",[a("p",[t._v("永久重定向")])])]),t._v(" "),a("li",[a("p",[t._v("302")]),t._v(" "),a("blockquote",[a("p",[t._v("临时重定向")])])]),t._v(" "),a("li",[a("p",[t._v("304")]),t._v(" "),a("blockquote",[a("p",[t._v("自上次请求，未修改的文件")])])]),t._v(" "),a("li",[a("p",[t._v("400")]),t._v(" "),a("blockquote",[a("p",[t._v("错误的请求")])])]),t._v(" "),a("li",[a("p",[t._v("401")]),t._v(" "),a("blockquote",[a("p",[t._v("未被授权，需要身份验证，例如 token 信息等等")])])]),t._v(" "),a("li",[a("p",[t._v("403")]),t._v(" "),a("blockquote",[a("p",[t._v("请求被拒绝")])])]),t._v(" "),a("li",[a("p",[t._v("404")]),t._v(" "),a("blockquote",[a("p",[t._v("资源缺失，接口不存在，或请求的文件不存在等等")])])]),t._v(" "),a("li",[a("p",[t._v("500")]),t._v(" "),a("blockquote",[a("p",[t._v("服务器端的未知错误")])])]),t._v(" "),a("li",[a("p",[t._v("502")]),t._v(" "),a("blockquote",[a("p",[t._v("网关错误")])])]),t._v(" "),a("li",[a("p",[t._v("503")]),t._v(" "),a("blockquote",[a("p",[t._v("服务暂时无法使用")])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Author")]),t._v(" "),a("p",[t._v("回答者: "),a("a",{attrs:{href:"https://github.com/shfshanyue",target:"_blank",rel:"noopener noreferrer"}},[t._v("shfshanyue"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("原文地址: "),a("a",{attrs:{href:"https://shanyue.tech/post/http-status.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://shanyue.tech/post/http-status.html"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("肯定会碰到: 101/200/301/302/304/400/404/502")]),t._v(" "),a("li",[t._v("可能会碰到: 101/200/201/204/206/301/304/307/400/401/403/404/405/413/418/422/429/500/501/502/503/504")])]),t._v(" "),a("h2",{attrs:{id:"_101-switch-protocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_101-switch-protocol"}},[t._v("#")]),t._v(" 101 Switch Protocol")]),t._v(" "),a("p",[t._v("升级协议，如从 http 到 ws，此时需要反向代理支持，如 Nginx，在 Nginx 配置 websockt 如下:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("location / {\n  proxy_http_version 1.1;\n  proxy_set_header Upgrade $http_upgrade;\n  proxy_set_header Connection  $connection_upgrade;\n}\n\n\n")])])]),a("p",[t._v("示例:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/101.071b734b.png",alt:"101"}})]),t._v(" "),a("h2",{attrs:{id:"_200-ok"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_200-ok"}},[t._v("#")]),t._v(" 200 Ok")]),t._v(" "),a("p",[t._v("表示资源请求成功，也是最常见到的状态码")]),t._v(" "),a("p",[t._v("示例:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ curl https://shanyue.tech --head\nHTTP/2 200\n\n\n")])])]),a("h2",{attrs:{id:"_201-created"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_201-created"}},[t._v("#")]),t._v(" 201 Created")]),t._v(" "),a("p",[t._v("资源创建成功，多用于 POST 请求")]),t._v(" "),a("h2",{attrs:{id:"_204-no-content"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_204-no-content"}},[t._v("#")]),t._v(" 204 No Content")]),t._v(" "),a("p",[t._v("响应不会返回 Body，一般由以下两种情况")]),t._v(" "),a("ol",[a("li",[t._v("与 Options/Delete 请求搭配")]),t._v(" "),a("li",[t._v("打点类")])]),t._v(" "),a("p",[t._v("示例一: 掘金为 Options 请求的状态码设置为 204")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/204.5355a3b7.png",alt:"掘金为 Options 请求的状态码设置为 204"}})]),t._v(" "),a("p",[t._v("示例二: 知乎为 Delete 请求的状态码设置为 204，以下请求为取消关注")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/204-del.ee530dd7.png",alt:"掘金为 Delete 请求的状态码设置为 204"}})]),t._v(" "),a("p",[t._v("示例三: 当你在知乎看段子时，不妨打开控制台，会发现一个是 204 的状态码")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\ncurl 'https://www.zhihu.com/sc-profiler' \\\n  -H 'content-type: application/json' \\\n  --data-binary '[[\"i\",\"production.heifetz.main.desktop.v1.Collector.screen.1536_960.count\",1,1]]' \\\n  --compressed -vvv\n< HTTP/2 204\n< server: CLOUD ELB 1.0.0\n< date: Thu, 22 Oct 2020 07:46:30 GMT\n< content-type: text/html\n< vary: Accept-Encoding\n< x-backend-response: 0.002\n< cache-control: no-cache, no-store, must-revalidate, private, max-age=0\n\n\n")])])]),a("h2",{attrs:{id:"_206-partial-content"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_206-partial-content"}},[t._v("#")]),t._v(" 206 Partial Content")]),t._v(" "),a("p",[t._v("当请求多媒体数据数据较大时，会进行分片传输。当你在 B 站观看视频，打开开发者工具，会发现许多 206 状态码以及响应头 Content-Range")]),t._v(" "),a("p",[t._v("示例:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/206.94474e79.png",alt:"B站上的视频资源请求状态码为206"}})]),t._v(" "),a("h2",{attrs:{id:"_301-moved-permanently"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_301-moved-permanently"}},[t._v("#")]),t._v(" 301 Moved Permanently")]),t._v(" "),a("p",[t._v("永久重定向。http 转向 https 时，有时会使用 301，如 B 站。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ curl www.bilibili.com -vvv\n< HTTP/1.1 301 Moved Permanently\n< Server: Tengine\n< Date: Thu, 22 Oct 2020 08:04:59 GMT\n< Content-Type: text/html\n< Content-Length: 239\n< Connection: keep-alive\n< Location: https://www.bilibili.com/\n\n\n")])])]),a("h2",{attrs:{id:"_302-found"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_302-found"}},[t._v("#")]),t._v(" 302 Found")]),t._v(" "),a("p",[t._v("暂时重定向。http 转向 https 时，有时也会使用 302，如知乎")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ curl www.zhihu.com -vvv\n< HTTP/1.1 302 Found\n< Location: https://www.zhihu.com/\n< Content-Length: 0\n< X-NWS-LOG-UUID: 16068764905156850032\n< Connection: keep-alive\n< Server: Lego Server\n< Date: Thu, 22 Oct 2020 08:20:29 GMT\n< X-Cache-Lookup: Return Directly\n\n\n")])])]),a("h2",{attrs:{id:"_304-not-modified"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_304-not-modified"}},[t._v("#")]),t._v(" 304 Not Modified")]),t._v(" "),a("p",[t._v("资源已被缓存，与之相关的响应头部有：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ETag")])]),t._v(" "),a("li",[a("code",[t._v("last-modified")]),t._v("/"),a("code",[t._v("if-modified-since")])])]),t._v(" "),a("p",[t._v("一般用作 "),a("code",[t._v("index.html")]),t._v(" 等不带 hash 的资源，由于示例太多，这里就不举例了")]),t._v(" "),a("h2",{attrs:{id:"_307-temporary-redirect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_307-temporary-redirect"}},[t._v("#")]),t._v(" 307 Temporary Redirect")]),t._v(" "),a("p",[t._v("暂时重定向。也可作为 http 到 https 的重定向。还有一种用途用作 HSTS，当谷歌浏览器发现某 http 资源已被加入到 HSTS 列表，浏览器内部会通过 307 作重定向")]),t._v(" "),a("p",[t._v("示例:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/307-shanyue.5f2e9bb3.png",alt:"山月个人博客网站的 HSTS"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/307-stack.914347b0.png",alt:"Stackoverflow 中的307"}})]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/shfshanyue/Daily-Question/issues/37",target:"_blank",rel:"noopener noreferrer"}},[t._v("http 状态码中 301，302 和 307 有什么区别"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[t._v("301，Moved Permanently。永久重定向，该操作比较危险，需要谨慎操作：如果设置了 301，但是一段时间后又想取消，但是浏览器中已经有了缓存，还是会重定向。")]),t._v(" "),a("li",[t._v("302，Found。临时重定向，但是会在重定向的时候改变 method: 把 POST 改成 GET，于是有了 307")]),t._v(" "),a("li",[t._v("307，Temporary Redirect。临时重定向，在重定向时不会改变 method")])]),t._v(" "),a("h2",{attrs:{id:"_400-bad-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_400-bad-request"}},[t._v("#")]),t._v(" 400 Bad Request")]),t._v(" "),a("p",[t._v("对于服务器无法理解的参数，将会使用 400 作为返回码")]),t._v(" "),a("p",[t._v("示例一: 当 Content-Type: JSON 时，服务器解析 JSON 却失败")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('HTTP/1.1 400 Bad Request\nContent-Length: 35\n\n{"message":"Problems parsing JSON"}\n\n\n')])])]),a("h2",{attrs:{id:"_401-unauthorized"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_401-unauthorized"}},[t._v("#")]),t._v(" 401 Unauthorized")]),t._v(" "),a("p",[t._v("当没有权限的用户请求需要带有权限的资源时，会返回 401，此时携带正确的权限凭证再试一次可以解决问题")]),t._v(" "),a("p",[t._v("有时认证失败也会返回 401")]),t._v(" "),a("p",[t._v("示例一: 知乎登录时密码不正确")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/401.bd2d099f.png",alt:"知乎登录失败时"}})]),t._v(" "),a("p",[t._v("示例二: Github 中错误的凭证信息请求带权限资源")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('$ curl -i https://api.github.com -u foo:bar\n> HTTP/1.1 401 Unauthorized\n\n> {\n>   "message": "Bad credentials",\n>   "documentation_url": "https://developer.github.com/v3"\n> }\n\n\n')])])]),a("h2",{attrs:{id:"_403-forbidden"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_403-forbidden"}},[t._v("#")]),t._v(" 403 Forbidden")]),t._v(" "),a("p",[t._v("我就是不想让你访问，不管你的权限凭证是否正确！")]),t._v(" "),a("blockquote",[a("p",[t._v("In summary, a 401 Unauthorized response should be used for missing or bad authentication, and a 403 Forbidden response should be used afterwards, when the user is authenticated but isn’t authorized to perform the requested operation on the given resource.")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/3297048/403-forbidden-vs-401-unauthorized-http-responses",target:"_blank",rel:"noopener noreferrer"}},[t._v("403 与 401 状态码有什么区别"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"_404-not-found"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_404-not-found"}},[t._v("#")]),t._v(" 404 Not Found")]),t._v(" "),a("p",[t._v("未找到资源")]),t._v(" "),a("h2",{attrs:{id:"_405-method-not-allowed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_405-method-not-allowed"}},[t._v("#")]),t._v(" 405 Method Not Allowed")]),t._v(" "),a("p",[t._v("我需要 POST 这条资源，你去 GET 个锤子")]),t._v(" "),a("h2",{attrs:{id:"_413-payload-too-large"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_413-payload-too-large"}},[t._v("#")]),t._v(" 413 Payload Too Large")]),t._v(" "),a("p",[t._v("不要给我扔这么大的 Body，我处理不过来")]),t._v(" "),a("h2",{attrs:{id:"_418-i-m-a-teapot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_418-i-m-a-teapot"}},[t._v("#")]),t._v(" 418 I'm A Teapot")]),t._v(" "),a("p",[t._v("我是一个茶壶")]),t._v(" "),a("p",[t._v("我要抛咖啡，你却扔给我一个茶壶？")]),t._v(" "),a("p",[t._v("也可以用来处理不合法的参数校验，我想要个字符串，你给了我一个整数？")]),t._v(" "),a("h2",{attrs:{id:"_422-unprocessable-entity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_422-unprocessable-entity"}},[t._v("#")]),t._v(" 422 Unprocessable Entity")]),t._v(" "),a("p",[t._v("常用来处理不合法的参数校验。")]),t._v(" "),a("p",[t._v("Github 上给某个项目点赞时，故意设置一个不正确的参数命名，会返回状态码 422")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://shanyue.tech/assets/img/422.c4c88739.png",alt:"422"}})]),t._v(" "),a("h2",{attrs:{id:"_429-too-many-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_429-too-many-request"}},[t._v("#")]),t._v(" 429 Too Many Request")]),t._v(" "),a("p",[t._v("请求过多被限流。")]),t._v(" "),a("p",[t._v("超过某一个 API 的 Rate Limit 规则，会被限流，返回 429 状态码")]),t._v(" "),a("p",[t._v("示例: 在 Sentry 中异常上报过于频繁被限流")]),t._v(" "),a("h2",{attrs:{id:"_500-internal-server-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_500-internal-server-error"}},[t._v("#")]),t._v(" 500 Internal Server Error")]),t._v(" "),a("p",[t._v("服务器内部错误，很有可能是应用层未捕获错误而导致整个服务挂掉")]),t._v(" "),a("h2",{attrs:{id:"_502-bad-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_502-bad-gateway"}},[t._v("#")]),t._v(" 502 Bad Gateway")]),t._v(" "),a("p",[t._v("Nginx 上常见，从上游应用层未返回响应，上游应用层挂了")]),t._v(" "),a("h2",{attrs:{id:"_503-service-unavailable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_503-service-unavailable"}},[t._v("#")]),t._v(" 503 Service Unavailable")]),t._v(" "),a("p",[t._v("由于大量流量造成服务忙，稍等一下说不定就能用了")]),t._v(" "),a("h2",{attrs:{id:"_504-gateway-timeout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_504-gateway-timeout"}},[t._v("#")]),t._v(" 504 Gateway Timeout")]),t._v(" "),a("p",[t._v("网关超时，上游应用层迟迟未响应")])])}),[],!1,null,null,null);e.default=r.exports}}]);