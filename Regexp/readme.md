## 正则基础

::: tip
JS的正则引擎是NFA----“非确定型有限自动机”----匹配慢，但编译快
:::

#### 正则的适用场

1. 适合查找匹配复杂的 substring
2. 能够找到查找“子串”的规律
3. Vue1.0的词法解析，就大量运用了正则

#### 基础属性、方法与标识量

1. lastIndex：下一个匹配的起始位置
2. flags：返回正则的标识符
3. ignoreCase：是否忽略大小写
4. multiline：对匹配的多行字符串看做多行来匹配，尤其对于位置匹配^$
5. sticky：下一次匹配一定在lastIndex位置开始
6. global: 下次匹配位置可能在lastIndex位置开始，也可能在其后面开始
7. dotAll：是否匹配新行
8. unicode：/u 一串 Unicode 代码点
9. compile() 运行期间重新编译正则表达式
10. exec() 匹配项的搜索，设置 `g` 标志位时，多次执行exec查找同一字符串，查找从 lastIndex 属性指定的位置开始
    1. index 匹配到的字符位于原始字符串的索引值，
    2. input 原始字符串
    3. groups 捕获组对象，
    4. indices 在设置了 d 标志时存在，一个数组包含子字符串的边界，第一个元素为开始索引，第二表示结束索引
11. match() 匹配并返回匹配结果，matchAll
12. replace() 用给定的新子串，替换匹配结果
13. search() 搜索匹配项，返回在支付串中找到的字符索引
14. test()会更新lastIndex，即使再次查找 lastIndex 也不好被重置
15. split()
16.
   |  字符   |   含义   |
   | :------ | :-------- |
   | \w, \W | 字母、数字、下划线 |
   | \d, \D | 只匹配拉丁字母的数字 或 非数字 |
   | \b, \B | 单词边界，即字与空格间的位置，一边为\w，一边为非\w；左右两边都为\w与\W之间的位置，\w与^之间的位置，\w与$之间的位置 |
   | \s, \S | \s 是匹配所有空白符，包括换行，等价于 [ \f\n\r\t\v]；\S 非空白符，不包括换行 |
   | \p{ Unicode属性值} 或 \p{Unicode属性名=Unicode属性值} 或 \p{UnicodeBinary 属性名} | 指定unicode的匹配范围|
   | ^ | 起始位置 |
   | $ | 结束位置 |
   | . | 任何单个字符 |
   | * | 匹配前面的字符零次或多次 |
   | + | 匹配前面的字符一次或多次 |
   | {n} 或 {m,n} | 匹配前面的字符n次或m~n次 |
   | [^XXX] | 不包括括号中的字符集 |
   | [xxxx] | 匹配括号中的任意字符，字符直接是或的关系 |
   | [0-9] | 表示匹配范围 |
   | \f | 换页符 等价于 \x0c |
   | \n | 换行符 等价于 \x0a |
   | \r | 回车符 等价于 \x0d |
   | \t | 制表符 等价于 \x09 |
   | \v | 垂直制表符 等价于 \x0b |
   | 其他 | \x20 空白符  \x0A(16)  \011(8)  posix字符类 |
   | 修饰符 | /g 全局，/i 不区分大小写，/m 多行匹配，只影响^和$， /s 让`.`包含换行，/y sticky，/u unicode|

#### 基础知识、基本概念

1. 捕获----(exp)相关匹配存储到一个`临时缓冲区`中，缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。 `reg?<name>exp` 匹配exp, 并将捕获文本放到名称为name的组里
2. 非捕获----(?:exp)需要分组，但不捕获
3. 位置匹配
4. 正向预查：作为`限制条件使用`
   1. 前瞻 exp1(?=exp2) ---- 找exp2前面的exp1
   2. 后顾 (?<=exp2)exp1 ---- 找exp2后面的exp1
   3. 前瞻 exp1(?!exp2) ---- 找exp1后面不是exp2
   4. 前瞻 (?<!exp2)exp1 ---- 前面不是exp2的exp1
5. 引用----"$2","$1" 第几个匹配子项；"$0"匹配到的整体
6. 反向引用----使用前面匹配的内容作为正则表达式的一部分 \1
7. 查找机制：从左到右，贪婪或非贪婪匹配，子表达式匹配成功，继续向右，否则进行回溯过程，再尝试匹配
8. 回溯机制
    1. 确定匹配成功的部分
    2. 正在匹配的部分不成功，即进行回退，默认先回退一步，成功则继续，不成功则继续回退
9. 贪婪量词 *, + 「先下手为强！深度优先搜索」
10. 惰性量词 ?, *?, +? 「不贪、很知足，但有时为了整体匹配成功，也会进行回溯，再多塞点」
11. 分支 |
